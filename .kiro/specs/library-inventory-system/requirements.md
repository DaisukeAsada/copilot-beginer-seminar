# Requirements Document

## Introduction
本ドキュメントは、図書館の蔵書管理システムに関する要件を定義します。このシステムは、図書館における蔵書の登録・管理・検索・貸出・返却などの業務を効率化し、利用者と図書館員双方の利便性を向上させることを目的としています。

## Project Description (Input)
図書館の蔵書システム

## Requirements

### Requirement 1: 蔵書登録・管理
**Objective:** As a 図書館員, I want 書籍情報を登録・編集・削除できる機能, so that 蔵書データベースを正確に維持管理できる

#### Acceptance Criteria
1. When 図書館員が新規書籍情報を入力して登録ボタンを押した時, the 蔵書管理システム shall 書籍をデータベースに登録し、一意のIDを発行する
2. When 図書館員が既存書籍の情報を編集して保存した時, the 蔵書管理システム shall 該当書籍の情報を更新し、更新日時を記録する
3. When 図書館員が書籍の削除を実行した時, the 蔵書管理システム shall 確認ダイアログを表示し、承認後にデータベースから削除する
4. If 必須項目（タイトル、著者、ISBN）が未入力の場合, the 蔵書管理システム shall エラーメッセージを表示し、登録を拒否する
5. The 蔵書管理システム shall 各書籍に対してタイトル、著者、出版社、出版年、ISBN、カテゴリ、所在場所、状態を管理する

### Requirement 2: 蔵書検索
**Objective:** As a 利用者, I want 蔵書を様々な条件で検索できる機能, so that 読みたい本を素早く見つけられる

#### Acceptance Criteria
1. When 利用者が検索キーワードを入力して検索を実行した時, the 蔵書管理システム shall タイトル、著者、ISBN、カテゴリを対象に部分一致検索を行い、結果を表示する
2. When 検索結果が0件の場合, the 蔵書管理システム shall 該当する蔵書がない旨のメッセージを表示する
3. When 利用者が検索結果の書籍を選択した時, the 蔵書管理システム shall 書籍の詳細情報と貸出状況を表示する
4. Where 詳細検索機能が有効な場合, the 蔵書管理システム shall 出版年範囲、カテゴリ、貸出可能のみなどの絞り込み条件を提供する
5. The 蔵書管理システム shall 検索結果をタイトル順、著者順、出版年順でソートする機能を提供する

### Requirement 3: 貸出管理
**Objective:** As a 図書館員, I want 書籍の貸出処理を効率的に行える機能, so that 利用者への迅速なサービス提供ができる

#### Acceptance Criteria
1. When 図書館員が利用者IDと書籍IDを入力して貸出処理を実行した時, the 蔵書管理システム shall 貸出記録を作成し、返却期限を設定する
2. When 貸出処理が完了した時, the 蔵書管理システム shall 書籍の状態を「貸出中」に更新し、貸出レシートを発行する
3. If 該当書籍が既に貸出中の場合, the 蔵書管理システム shall エラーメッセージを表示し、貸出処理を拒否する
4. If 利用者が貸出上限冊数に達している場合, the 蔵書管理システム shall 警告を表示し、貸出処理を拒否する
5. While 書籍が貸出中の状態である間, the 蔵書管理システム shall 検索結果に貸出中であることを明示する

### Requirement 4: 返却管理
**Objective:** As a 図書館員, I want 書籍の返却処理を効率的に行える機能, so that 蔵書の状態を正確に管理できる

#### Acceptance Criteria
1. When 図書館員が書籍IDを入力して返却処理を実行した時, the 蔵書管理システム shall 貸出記録を更新し、返却日を記録する
2. When 返却処理が完了した時, the 蔵書管理システム shall 書籍の状態を「貸出可能」に更新する
3. If 返却期限を超過している場合, the 蔵書管理システム shall 延滞日数を計算し、延滞情報を表示する
4. When 延滞書籍の返却が完了した時, the 蔵書管理システム shall 延滞記録を利用者の履歴に保存する

### Requirement 5: 利用者管理
**Objective:** As a 図書館員, I want 利用者情報を管理できる機能, so that 適切な貸出サービスを提供できる

#### Acceptance Criteria
1. When 図書館員が新規利用者情報を登録した時, the 蔵書管理システム shall 利用者IDを発行し、データベースに登録する
2. When 図書館員が利用者情報を検索した時, the 蔵書管理システム shall 氏名、利用者ID、連絡先で検索可能とする
3. When 図書館員が利用者詳細を表示した時, the 蔵書管理システム shall 現在の貸出状況と貸出履歴を表示する
4. The 蔵書管理システム shall 各利用者に対して氏名、住所、連絡先、利用者ID、登録日を管理する
5. If 利用者IDが重複している場合, the 蔵書管理システム shall エラーを表示し、登録を拒否する

### Requirement 6: 予約機能
**Objective:** As a 利用者, I want 貸出中の書籍を予約できる機能, so that 返却され次第借りられる

#### Acceptance Criteria
1. When 利用者が貸出中の書籍に対して予約リクエストを送信した時, the 蔵書管理システム shall 予約を登録し、予約番号を発行する
2. When 予約書籍が返却された時, the 蔵書管理システム shall 予約者に通知を送信する
3. While 書籍に予約が入っている状態である間, the 蔵書管理システム shall 他の利用者への即時貸出を制限する
4. If 予約者が通知後7日以内に来館しなかった場合, the 蔵書管理システム shall 予約をキャンセルし、次の予約者に通知する

### Requirement 7: レポート・統計
**Objective:** As a 図書館管理者, I want 蔵書と貸出に関する統計情報を確認できる機能, so that 運営方針の意思決定に活用できる

#### Acceptance Criteria
1. When 管理者がレポート画面にアクセスした時, the 蔵書管理システム shall 貸出数、返却数、延滞数の統計を表示する
2. When 管理者が期間を指定してレポートを生成した時, the 蔵書管理システム shall 指定期間の貸出統計をグラフと表形式で表示する
3. The 蔵書管理システム shall 人気書籍ランキング、カテゴリ別貸出統計を提供する
4. Where CSV出力機能が有効な場合, the 蔵書管理システム shall レポートデータをCSV形式でエクスポートする機能を提供する
